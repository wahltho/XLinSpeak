#!/bin/bash
set -euo pipefail

# Linux build via Docker (x86_64)
# Output: XLinSpeak/lin_x64/XLinSpeak.xpl

docker run --rm --platform=linux/amd64 \
  -v "$(pwd)":/workspace -w /workspace ubuntu:22.04 bash -lc "\
  apt-get update && apt-get install -y build-essential nasm && \
  cd src && make && \
  cp -f lin.xpl ../XLinSpeak/lin_x64/XLinSpeak.xpl && \
  make clean"
